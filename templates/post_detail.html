{% extends 'base.html' %}
{% block content %}
<div class="min-h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-300">
    <div class="container mx-auto p-4">
        <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4">Post Details</h2>
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200">Content</h3>
            <p class="text-gray-600 dark:text-gray-400">{{ post.content }}</p>
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mt-4">Status</h3>
            <p class="text-gray-600 dark:text-gray-400">{{ post.status | capitalize }}</p>
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mt-4">Created At</h3>
            <p class="text-gray-600 dark:text-gray-400">{{ post.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</p>
            {% if post.schedule_date %}
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mt-4">Schedule Date</h3>
            <p class="text-gray-600 dark:text-gray-400">{{ post.schedule_date.strftime('%Y-%m-%d') }}</p>
            {% endif %}
            <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mt-4">Approvals</h3>
            <ul class="list-disc pl-5 text-gray-600 dark:text-gray-400">
                {% for approval in post.approvals %}
                <li>{{ approval.user.username }}: {{ approval.status | capitalize }}</li>
                {% endfor %}
            </ul>
            {% if post.status == 'pending' and post.approvals|selectattr('user_id', 'equalto', current_user.id)|selectattr('status', 'equalto', 'pending')|list %}
            <form method="POST" class="mt-4">
                <button type="submit" name="action" value="approve" class="p-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition">Approve</button>
                <button type="submit" name="action" value="reject" class="p-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition ml-2">Reject</button>
            </form>
            {% endif %}
            <a href="{{ url_for('client_posts', client_id=post.client_id) }}" class="mt-4 inline-block p-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition">Back to Posts</a>
        </div>
    </div>
</div>
{% endblock %}